<!doctype html>
<html lang="en">
<head><style id="chat-fixes">
  /* Background image set by --chat-bg */
  :root { --chat-bg: none; }
  body::before{
    content:"";
    position: fixed;
    inset: 0;
    background-image: var(--chat-bg);
    background-size: cover;
    background-position: center;
    opacity: .22;
    filter: saturate(.95) brightness(.85);
    pointer-events: none;
    z-index: -1;
  }

  /* Keep portrait steady and non-jumpy */
  #portraitImg{
    display:block;
    width: 100%;
    height: auto;
    max-height: 68vh;
    object-fit: cover;
    border-radius: 14px;
  }
  #portraitImg[loading="eager"]{ contain: paint; }

  /* Chat column scrolls only inside messages list */
  #messages{
    max-height: calc(100vh - 260px);
    overflow-y: auto;
    will-change: scroll-position;
    scroll-behavior: smooth;
  }
  #composer{
    position: sticky;
    bottom: 0;
    padding-top: .5rem;
    background: linear-gradient(180deg, rgba(10,12,20,0) 0%,
                                       rgba(10,12,20,.65) 40%,
                                       rgba(10,12,20,.85) 100%);
  }
</style>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blossom & Blade — Chat</title>
  <link rel="stylesheet" href="/styles/chat.css?v=9" />
</head>
<body>
  <header class="top">
    <h1 id="roomTitle">Blossom &amp; Blade —</h1>
    <div class="chips">
      <span class="chip red">RED</span>
      <span class="chip adult">Adults 18+ only</span>
    </div>
  </header>

  <main class="chat-main">
    <section class="portrait-panel">
      <img id="portraitImg" alt="portrait" />
      <div class="caption" id="portraitLabel"></div>
    </section>

    <section class="chat-panel">
      <div id="messages" class="messages"></div>

      <form id="composer" class="composer" autocomplete="off">
        <input id="chatInput" type="text" placeholder="Say something..." />
        <button id="sendBtn" type="submit">Send</button>
      </form>
    </section>
  </main>

  <script src="/scripts/chat.js?v=9" defer></script>
</body>
</html>
