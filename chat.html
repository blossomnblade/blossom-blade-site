<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blossom &amp; Blade — Chat</title>

  <!-- Cache-bust to ensure the new styles load -->
  <link rel="stylesheet" href="/styles/chat.css?v=bb4">
</head>
<body>
  <header class="header" role="banner">
    <div class="logo">Blossom &amp; Blade —</div>
    <div class="badges">
      <span class="badge red">RED</span>
      <span class="badge">Adults 18+ only</span>
    </div>
  </header>

  <main class="page">
    <!-- Portrait card -->
    <aside class="card" id="portrait-card">
      <figure>
        <img id="portrait" class="media" src="" alt="portrait" />
        <!-- Any caption gets hidden by CSS/JS; leaving empty to be safe -->
        <figcaption></figcaption>
      </figure>
    </aside>

    <!-- Chat panel -->
    <section class="chat" id="chat-panel" aria-live="polite">
      <div class="fx-overlay" aria-hidden="true"></div>
      <div class="messages" id="messages"></div>

      <form class="composer" id="composer">
        <input id="composer-input" type="text" placeholder="Say something..." autocomplete="off" />
        <button id="send-btn" class="send" type="submit">Send</button>
      </form>
    </section>
  </main>

  <!-- Tiny inline: set portrait by ?man=; adjust filenames if yours differ -->
  <script>
    (function () {
      const q = new URLSearchParams(location.search);
      const man = (q.get('man') || 'blade').toLowerCase();
      const portraits = {
        blade: '/images/blade.jpg',
        viper: '/images/viper.jpg',
        dylan: '/images/dylan.jpg',
        alexander: '/images/alexander.jpg',
        grayson: '/images/grayson.jpg',
        silas: '/images/silas.jpg'
      };
      const img = document.getElementById('portrait');
      if (img) {
        img.src = portraits[man] || portraits.blade;
        img.alt = man[0].toUpperCase() + man.slice(1);
      }
    })();
  </script>

  <!-- Defer + version bump guarantees the new JS runs after DOM is ready -->
  <script src="/scripts/chat.js?v=bb4" defer></script>
</body>
</html>
