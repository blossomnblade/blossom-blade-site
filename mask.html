<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Grayson Kincaid — PG-13 Room</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;color:#f2e8e8;
       background:#120307 url("images/grayson-bg.jpg") center/cover no-repeat fixed;}
  .wrap{max-width:900px;margin:5rem auto;padding:1rem}
  .title{font-size:2.2rem;font-weight:800;text-shadow:0 2px 16px rgba(0,0,0,.85)}
  .chat{background:rgba(20,0,0,.55);backdrop-filter:blur(6px);border-radius:16px;padding:1rem;box-shadow:0 10px 40px rgba(0,0,0,.6)}
  .bubble{display:inline-block;background:rgba(255,255,255,.08);padding:.7rem 1rem;border-radius:12px;margin:.5rem 0;max-width:80%}
  .you{background:rgba(244,63,94,.25);margin-left:auto}
  .row{display:flex;gap:.5rem;margin-top:.75rem}
  input{flex:1;padding:.7rem .9rem;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.35);color:#fff}
  button{padding:.7rem 1rem;border-radius:10px;border:0;background:#fb7185;color:#2a0008;font-weight:700;cursor:pointer}
  .tip{opacity:.8;font-size:.85rem;margin-top:.25rem}
</style>
</head>
<body>
<div class="wrap">
  <div class="title">Grayson Kincaid</div>
  <div id="chat" class="chat"></div>
  <div class="row">
    <input id="box" placeholder="Say something sweet…" />
    <button id="send">Send</button>
  </div>
  <div class="tip">One line at a time. He answers, then asks. PG-13; explicit talk unlocks with coins.</div>
</div>
<script>
const persona="grayson"; const stage="subscriber";
const chat=document.getElementById('chat'); const box=document.getElementById('box'); const send=document.getElementById('send');
let history=[];
function addBubble(t,m=false){const b=document.createElement('div');b.className='bubble'+(m?' you':'');b.textContent=t;chat.appendChild(b);chat.scrollTop=chat.scrollHeight;}
async function ask(t){
  history.push({role:'user',content:t});
  const r=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({persona,history,stage})});
  const d=await r.json(); const reply=d.reply||'…';
  history.push({role:'assistant',content:reply}); addBubble(reply);
}
send.onclick=()=>{const v=box.value.trim(); if(!v) return; addBubble(v,true); box.value=''; ask(v);};
// single opener:
addBubble("Evening, little flame. Tell me one true thing about your day.");
</script>
</body>
</html>
