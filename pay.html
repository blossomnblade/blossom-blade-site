<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Choose Your Plan • Blossom n Blade</title>
<meta name="description" content="Adults only. PG-13 chat by default; coins unlock erotic chat (words only).">
<style>
  :root{ --bg:#0e0a0d; --panel:#171017; --ink:#efe6ee; --muted:#bba9b6; --plum:#4B1F3C; --wine:#6E0F2E; --line:#2a1a25 }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; color:var(--ink); font:600 16px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial;
    background:linear-gradient(0deg, rgba(14,10,13,.88), rgba(14,10,13,.88)), url("/images/gothic-bg.jpg") center/cover no-repeat fixed;
  }
  header{display:flex; justify-content:space-between; align-items:center; padding:12px 14px; border-bottom:1px solid var(--line);
         background:linear-gradient(180deg,#1a121a,#120a11)}
  .brand{display:flex; align-items:center; gap:10px}
  .dot{width:22px;height:22px;border-radius:50%; background:conic-gradient(from 220deg,var(--wine),var(--plum))}
  h1{margin:0; font-size:18px}
  .wrap{max-width:920px; margin:18px auto; padding:0 14px}
  .notice{margin:10px auto 16px; text-align:center; color:#e9d4e6}
  .grid{display:grid; gap:14px; grid-template-columns:1fr; }
  @media(min-width:780px){ .grid{grid-template-columns:1fr 1fr;} }
  .card{border:1px solid var(--line); border-radius:16px; overflow:hidden; background:linear-gradient(180deg,#1a121a,#120a11);
        box-shadow:0 10px 30px rgba(0,0,0,.45)}
  .hd{padding:14px; border-bottom:1px solid #241624; display:flex; align-items:center; justify-content:space-between}
  .title{font:800 18px/1 system-ui}
  .bd{padding:14px}
  .muted{color:var(--muted); font-size:13px}
  .btn{display:inline-block; margin-top:10px; border:none; border-radius:999px; padding:10px 14px; cursor:pointer; font-weight:800; color:white;
       background:linear-gradient(90deg,var(--plum),var(--wine)); text-decoration:none}
  .ghost{background:#2a1a25}
  .row{display:flex; gap:8px; align-items:center}
  .pill{display:inline-block; padding:4px 8px; border:1px solid #2b1a28; border-radius:999px; font-size:12px; color:#e9d4e6}
  .footer{margin:16px auto 28px; text-align:center; color:#bba9b6; font-size:13px}
  .ok{padding:8px 10px; border-radius:10px; background:#142114; color:#d8ffd8; border:1px solid #234123; display:none; margin:10px 0}
</style>

<script>
// ---------- Unified age gate (same keys as age.html + chat.html) ----------
(function(){
  const qs = new URLSearchParams(location.search);
  const man = (qs.get("man")||"").toLowerCase();

  const until = Number(localStorage.getItem("bb.ageVerifiedUntil") || localStorage.getItem("bb.age_verified_until") || 0);
  const flag  = localStorage.getItem("bb.ageVerified");

  const verified = (until && until > Date.now()) || flag === "1";

  if (!verified) {
    const nextHere = location.pathname + location.search + location.hash;
    location.replace(`/age.html?man=${encodeURIComponent(man)}&next=${encodeURIComponent(nextHere)}`);
  }
})();
</script>
</head>
<body>
<header>
  <div class="brand"><div class="dot" aria-hidden="true"></div><h1>Choose your plan</h1></div>
  <a class="btn ghost" href="/index.html">Back</a>
</header>

<div class="wrap">
  <div class="notice">
    <div class="pill">Adults only</div>
    <div id="ageReceipt" class="ok">Verified — you’re good to purchase.</div>
  </div>

  <div class="grid">
    <!-- Day Pass -->
    <div class="card">
      <div class="hd">
        <div class="title">Day Pass — $5.99</div>
        <div class="pill">3½-minute preview per guy</div>
      </div>
      <div class="bd">
        <ul class="muted">
          <li>Unlocks one guy of your choice for the day</li>
          <li>PG-13 chat by default</li>
          <li>Coins can unlock erotic chat (words only)</li>
        </ul>
        <a id="buyDay" class="btn" href="#">Continue to checkout</a>
      </div>
    </div>

    <!-- Monthly -->
    <div class="card">
      <div class="hd">
        <div class="title">Monthly — $10.99</div>
        <div class="pill">Includes 3 coin packs free</div>
      </div>
      <div class="bd">
        <ul class="muted">
          <li>All guys unlocked</li>
          <li>PG-13 chat by default</li>
          <li>Coins unlock erotic chat (words only); 3 packs included</li>
        </ul>
        <a id="buyMonth" class="btn" href="#">Continue to checkout</a>
      </div>
    </div>
  </div>

  <div class="footer">$1 of every subscription goes to a Domestic Violence charity.</div>
</div>

<script>
// carry the "man" in links and send them through a last sanity check on age gate
const qs = new URLSearchParams(location.search);
const man = (qs.get("man")||"").toLowerCase();
const addMan = url => url + (url.includes("?") ? "&" : "?") + "man=" + encodeURIComponent(man);

document.getElementById("buyDay").setAttribute("href", addMan("/checkout-day.html"));
document.getElementById("buyMonth").setAttribute("href", addMan("/checkout-month.html"));

// show verified receipt if key is present
(function(){
  const until = Number(localStorage.getItem("bb.ageVerifiedUntil") || localStorage.getItem("bb.age_verified_until") || 0);
  const flag  = localStorage.getItem("bb.ageVerified");
  if ((until && until > Date.now()) || flag === "1"){
    document.getElementById("ageReceipt").style.display = "block";
  }
})();
</script>
</body>
</html>
