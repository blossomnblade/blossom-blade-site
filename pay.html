<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blossom & Blade — Subscribe</title>
  <meta name="description" content="Choose a pass and start your PG-13 fantasy chat. Coins unlock explicit rooms. $1 to Domestic Violence charity." />
  <style>
    *{box-sizing:border-box}
    body{
      margin:0; color:#fff;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:url('images/gothic-bg.jpg') center/cover fixed no-repeat;
    }
    header{
      position:sticky; top:0; z-index:20;
      display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;
      padding:12px 14px; background:rgba(0,0,0,.75);
      border-bottom:1px solid rgba(255,255,255,.15); backdrop-filter:blur(6px);
    }
    main{max-width:980px; margin:20px auto; padding:0 14px 40px;}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:14px;}
    .card{
      border:1px solid rgba(255,255,255,.18); border-radius:16px; overflow:hidden;
      background:rgba(0,0,0,.7);
    }
    .head{padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.12); font-weight:800;}
    .body{padding:14px;}
    .price{font-size:28px; font-weight:800; letter-spacing:.2px; margin:4px 0 8px;}
    .sub{opacity:.9; font-size:12px; margin-top:6px}
    ul{padding-left:18px; margin:8px 0 0}
    li{margin:4px 0}
    .btn{display:inline-block; text-decoration:none; border:none; cursor:pointer;
      padding:11px 14px; border-radius:10px; font-weight:700; color:#fff;
      background:#4b2a6b; border:1px solid rgba(255,255,255,.18);
    }
    .muted{opacity:.85; font-size:12px}
    .notice{margin:14px 0; padding:10px 12px; border:1px dashed rgba(255,255,255,.25); border-radius:12px; background:rgba(0,0,0,.55)}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .chip{font-size:12px; padding:5px 8px; border-radius:999px; background:#2b2b2b; border:1px solid rgba(255,255,255,.18)}
    .danger{opacity:.9; font-size:12px; color:#ffd6d6}
    footer{padding:18px 14px; text-align:center; font-size:12px; background:rgba(0,0,0,.75); border-top:1px solid rgba(255,255,255,.15)}
    .accent{color:#d9b3ff}
    .col{display:flex; flex-direction:column; gap:8px}
    .disabled{opacity:.6; cursor:not-allowed}
  </style>
</head>
<body>

<header>
  <div class="row">
    <a href="index.html" style="text-decoration:none;color:inherit;display:flex;align-items:center;gap:10px;">
      <img src="images/logo.jpg" alt="Blossom n Blade" style="height:26px;width:auto;border-radius:4px;" />
      <strong>Blossom &amp; Blade</strong>
    </a>
    <span class="chip">Transparent pricing</span>
  </div>
  <div class="muted">PG-13 with subscription • Explicit talk unlocked with coins • $1 of every subscription goes to this month’s DV charity</div>
</header>

<main>
  <h1 style="margin:6px 0 2px;">Choose Your Access</h1>
  <p class="muted" id="who"></p>

  <div class="notice">
    <strong>Simple rules</strong>: <span class="accent">Subscription = foreplay / companionship (PG-13)</span>.  
    <span class="accent">Coins = explicit escalation</span> in alternate rooms. No visuals, words only. Aftercare included.
  </div>

  <div class="grid" style="margin-top:10px;">

    <!-- Day Pass -->
    <div class="card">
      <div class="head">Day Pass — per character</div>
      <div class="body">
        <div class="price">$5.99</div>
        <div class="sub">24 hours access to <span id="charName">this character</span>. PG-13 vibe with flirty innuendo.</div>
        <ul>
          <li>One character for a day</li>
          <li>Warm conversation, one line at a time</li>
          <li>Innuendo allowed (still PG-13)</li>
        </ul>
        <div class="row" style="margin-top:10px;">
          <button class="btn" id="buyDay">Start Day Pass</button>
          <span class="muted">Reset chat so it feels like a fresh meet.</span>
        </div>
      </div>
    </div>

    <!-- Monthly -->
    <div class="card">
      <div class="head">Monthly — all six men</div>
      <div class="body">
        <div class="price">$10.99</div>
        <div class="sub">Unlimited PG-13 across <em>all</em> companions. Slow-build intimacy + suggestive heat.</div>
        <ul>
          <li>Access to all 6 characters</li>
          <li>Remembers your vibe per room</li>
          <li>Best value for exploring</li>
        </ul>
        <div class="row" style="margin-top:10px;">
          <button class="btn" id="buyMonth">Start Monthly</button>
          <span class="muted">Cancel anytime. $1 goes to DV charity.</span>
        </div>
      </div>
    </div>

    <!-- Coins -->
    <div class="card">
      <div class="head">Coins — unlock explicit rooms</div>
      <div class="body">
        <div class="sub">Use coins to enter the “dirty room” when you’re ready. No pressure.</div>
        <ul>
          <li>5 coins — $1</li>
          <li>25 coins — $5</li>
          <li>60 coins — $10</li>
          <li>150 coins — $20</li>
        </ul>
        <div class="row" style="margin-top:10px;">
          <button class="btn disabled" disabled>Coin Shop (coming soon)</button>
          <span class="muted">Explicit talk stays locked until coins are enabled.</span>
        </div>
      </div>
    </div>

  </div>

  <div class="notice">
    <strong>Privacy & pacing</strong>: He speaks one line, then waits. We keep it respectful, women-safe, and grounded.  
    After purchase we refresh the room so it feels natural—no factory scripts.
  </div>

  <div class="danger">
    Developer note: this page is in <em>test mode</em>. The buttons below simulate a successful purchase so you can try the flow now.
  </div>

  <div class="row" style="margin-top:10px;">
    <button class="btn" id="simulateDay">Simulate Day Pass</button>
    <button class="btn" id="simulateMonth">Simulate Monthly</button>
  </div>
</main>

<footer>
  $1 of every subscription goes to this month’s Domestic Violence charity.
</footer>

<script>
  // --- read which room sent us here
  const params = new URLSearchParams(location.search);
  const manPage = (params.get('man') || 'index.html').replace(/^\//,'');
  // map filename to a friendly name
  const nameMap = {
    "woods.html":"Blade Kincaid",
    "mask.html":"Grayson Kincaid",
    "garage.html":"Dylan Vale",
    "rockstar.html":"Silas Lennox",
    "cowboy.html":"Jesse Granger",
    "gentleman.html":"Cassian Blackwell"
  };
  const charName = nameMap[manPage] || "your companion";
  document.getElementById('who').textContent = `You’re checking out: ${charName}`;
  document.getElementById('charName').textContent = charName;

  // --- helpers
  function markSubscriber(level){
    // level: 'day' or 'month'
    // mark as subscriber for stage-based chat
    localStorage.setItem('bb_subscriber','1');
    if(level === 'month'){ localStorage.setItem('bb_month','1'); }

    // clear any old thread memory so it feels like a new “meet”
    try{
      const keyGuess = 'bb_thread_' + (manPage.split('.')[0] || 'room');
      localStorage.removeItem(keyGuess);
    }catch(e){}

    // send her back to the room; subscriber stage will kick in
    const dest = manPage + '?stage=subscriber';
    location.href = dest;
  }

  // --- live checkout (future): call your server to create a Stripe Checkout Session then redirect.
  async function startCheckout(kind){
    // placeholder: when we integrate Stripe, we’ll POST to /api/checkout
    // and redirect to the returned URL.
    alert("Live checkout coming soon. Using simulator for now.");
  }

  // Buttons
  document.getElementById('buyDay').addEventListener('click', ()=> startCheckout('day'));
  document.getElementById('buyMonth').addEventListener('click', ()=> startCheckout('month'));

  // Simulators (let you test today)
  document.getElementById('simulateDay').addEventListener('click', ()=> markSubscriber('day'));
  document.getElementById('simulateMonth').addEventListener('click', ()=> markSubscriber('month'));
</script>

</body>
</html>
