/* Blossom & Blade â€” Chat layout (dark theme, robust fallbacks) */

/* Theme tokens with hard fallbacks so we NEVER paint white */
:root{
  --bg:#0f1115;
  --panel:#0f131b;
  --border:#202534;
  --text:#e9edf1;
  --muted:#cfd6e4;
  --bubble:#151922;
  --bubble-user:#1b2030;
  --accent:#ff6b8b;
  --shadow: 0 10px 30px rgba(0,0,0,.45);
}

*{ box-sizing:border-box; }

html,body{ height:100%; margin:0; background:var(--bg,#0f1115); color:var(--text,#e9edf1); }

.topbar{
  display:flex; align-items:center; gap:12px;
  max-width:1200px; margin:0 auto; color:var(--muted);
}
.age-pill{
  margin-left:auto; font-size:12px; padding:6px 10px; border-radius:18px;
  background:var(--panel,#0f131b); border:1px solid var(--border,#202534);
}

#app{
  max-width:1200px; margin:0 auto; padding:16px;
  display:grid; gap:18px; grid-template-columns: minmax(300px,1fr) minmax(260px,36%);
}

@media (max-width: 920px){
  #app{ grid-template-columns: 1fr; }
}

header{ background:var(--panel,#0f131b); border-bottom:1px solid var(--border,#202534); }

section[aria-label="Conversation"]{ min-width:0; }

#messages{
  list-style:none; /* kill bullets ALWAYS */
  margin:0; padding:0 0 96px 0;  /* leave space for sticky composer */
  display:grid; gap:14px;
}

.bubble{
  background:var(--bubble,#151922); color:var(--muted,#cfd6e4);
  border-radius:16px; padding:12px 16px; max-width:68ch; box-shadow:var(--shadow);
  width:max-content;
}
.bubble.ai{ }
.bubble.user{
  background:var(--bubble-user,#1b2030); color:var(--text,#e9edf1);
  margin-left:auto;
}

.composer{
  position:sticky; bottom:0; display:flex; gap:10px; padding:10px 0 6px;
  background:linear-gradient(180deg, rgba(15,17,21,0), var(--bg,#0f1115) 40%);
}
#chatInput{
  flex:1; padding:14px 16px; border-radius:28px;
  border:1px solid var(--border,#202534); background:#121621; color:var(--text,#e9edf1);
  outline:none;
}
#sendBtn{
  padding:12px 22px; border:0; border-radius:28px; background:var(--accent,#ff6b8b);
  color:#111; font-weight:700; cursor:pointer;
}

.portraitPanel{
  background:var(--panel,#0f131b); border:1px solid var(--border,#202534);
  border-radius:18px; padding:12px; display:flex; align-items:center; justify-content:center;
}
.portraitPanel img{ width:100%; height:auto; border-radius:14px; object-fit:cover; display:block; }

/* Trial / RED chip */
#slowBadge{
  position:fixed; top:72px; right:24px; z-index:40;
  background:var(--panel,#0f131b); border:1px solid var(--border,#202534);
  color:var(--text,#e9edf1); border-radius:20px; padding:6px 10px; font-size:12px;
  display:flex; align-items:center; gap:8px; box-shadow:var(--shadow);
}

/* Utilities */
.visually-hidden{ position:absolute !important; width:1px; height:1px; margin:-1px; padding:0; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
